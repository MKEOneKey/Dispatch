<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>launchOnResume</title>
</head><body><link href="../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../../";</script><script src="https://unpkg.com/kotlin-playground@1" data-selector="code.runnablesample"></script><script src="https://unpkg.com/kotlin-playground@1" data-selector="code.runnablesample"></script><script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async></script><link href="../../../styles/style.css" rel="Stylesheet"><link href="../../../styles/logo-styles.css" rel="Stylesheet"><link href="../../../styles/jetbrains-mono.css" rel="Stylesheet"><link href="../../../styles/main.css" rel="Stylesheet"><script type="text/javascript" src="../../../scripts/clipboard.js" async></script><script type="text/javascript" src="../../../scripts/navigation-loader.js" async></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" async></script><script type="text/javascript" src="../../../scripts/main.js" async></script>
  
    <div id="container">
      <div id="leftColumn"><a href="../../../index.html">
            <div id="logo"></div>
          </a>
        <div id="paneSearch"></div>
        <div id="sideMenu"></div>
      </div>
      <div id="main">
        <script type="text/javascript" src="../../../scripts/main.js"></script><div id="leftToggler"><span class="icon-toggler"></span></div>

        <div class="main-content" id="content" pageids="dispatch-android-lifecycle::dispatch.android.lifecycle/DispatchLifecycleScope/launchOnResume/#kotlin.coroutines.CoroutineContext#dispatch.android.lifecycle.DispatchLifecycleScope.MinimumStatePolicy#kotlin.coroutines.SuspendFunction1[kotlinx.coroutines.CoroutineScope,kotlin.Unit]/PointingToDeclaration//296330618">
          <div class="navigation-wrapper" id="navigation-wrapper">
            <div class="breadcrumbs"><a href="../../index.html">dispatch-android-lifecycle</a>/<a href="../index.html">dispatch.android.lifecycle</a>/<a href="index.html">DispatchLifecycleScope</a>/<a href="launch-on-resume.html">launchOnResume</a></div>
            <div class="pull-right d-flex">
              <div id="searchBar"></div>
            </div>
          </div>
          <div class="cover ">
            <h1 class="cover"><span>launch</span><wbr><span>On</span><wbr><span><span>Resume</span></span></h1>
          </div>
<div class="divergent-group" data-filterable-current=":dispatch-android-lifecycle:dokkaHtmlPartial/release" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="with-platform-tags"><span class="pull-right"></span></div>

  <div>
    <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="symbol monospace">fun <a href="launch-on-resume.html">launchOnResume</a>(context: <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html">CoroutineContext</a> = EmptyCoroutineContext, minimumStatePolicy: <a href="-minimum-state-policy/index.html">DispatchLifecycleScope.MinimumStatePolicy</a> = MinimumStatePolicy.RESTART_EVERY, block: suspend <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span>.() -&gt; <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a>): <span data-unresolved-link="kotlinx.coroutines/Job///PointingToDeclaration/">Job</span><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
<p class="paragraph">Lifecycle-aware function for launching a coroutine any time the <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Lifecycle.State.html">Lifecycle.State</a> is at least <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Lifecycle.State.html#RESUMED">Lifecycle.State.RESUMED</a>.</p><p class="paragraph"><code>block</code> is executed using the receiver <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span>'s <span data-unresolved-link="kotlinx.coroutines/Job///PointingToDeclaration/">Job</span> as a parent, but always executes using <span data-unresolved-link="kotlinx.coroutines/Dispatchers/Main/#/PointingToDeclaration/">Dispatchers.Main</span> as its <span data-unresolved-link="kotlinx.coroutines/CoroutineDispatcher///PointingToDeclaration/">CoroutineDispatcher</span>.</p><p class="paragraph">Execution of <code>block</code> is cancelled when the receiver <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span> is cancelled, or when <a href="lifecycle.html">lifecycle</a>'s <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Lifecycle.State.html">Lifecycle.State</a> drops below <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Lifecycle.State.html#RESUMED">Lifecycle.State.RESUMED</a>.</p><h2 class="">Samples</h2><div class="platform-hinted " data-platform-hinted="data-platform-hinted" data-togglable="Samples"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="sample-container"><code class="runnablesample monospace" theme="idea"><pre>import dispatch.android.lifecycle.DispatchLifecycleScope
import dispatch.android.lifecycle.DispatchLifecycleScope.MinimumStatePolicy.CANCEL
import dispatch.android.lifecycle.dispatchLifecycleScope
import dispatch.core.DispatcherProvider
import dispatch.core.launchMain
import dispatch.internal.test.Sample
import dispatch.internal.test.android.LiveDataTest
import dispatch.test.CoroutineTest
import io.kotest.matchers.shouldBe
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.Job
import kotlinx.coroutines.channels.Channel
import kotlinx.coroutines.flow.collect
import kotlinx.coroutines.flow.flow
import kotlinx.coroutines.runBlocking
fun main() { 
   //sampleStart 
   runBlocking {

    val channel = Channel&lt;String&gt;()
    val history = mutableListOf&lt;String&gt;()

    class SomeViewModel {
      val someFlow = flow {
        repeat(100) {
          emit(it)
        }
      }
    }

    class SomeFragment : Fragment() {

      val viewModel = SomeViewModel()

      init {
        dispatchLifecycleScope.launchOnResume(minimumStatePolicy = CANCEL) {
          viewModel.someFlow.collect {
            channel.send("$it")
          }
        }
      }
    }

    val fragment = SomeFragment()

    history.add("resuming")
    fragment.resume()

    repeat(3) {
      history.add(channel.receive())
    }

    // pausing the lifecycle cancels the existing Job
    history.add("pausing")
    fragment.pause()

    // resuming the lifecycle does not create a new Job

    history shouldBe listOf(
      "resuming",
      "0",
      "1",
      "2",
      "pausing"
    )
  } 
   //sampleEnd
}</pre></code></div><div class="sample-container"><code class="runnablesample monospace" theme="idea"><pre>import dispatch.android.lifecycle.DispatchLifecycleScope
import dispatch.android.lifecycle.DispatchLifecycleScope.MinimumStatePolicy.CANCEL
import dispatch.android.lifecycle.dispatchLifecycleScope
import dispatch.core.DispatcherProvider
import dispatch.core.launchMain
import dispatch.internal.test.Sample
import dispatch.internal.test.android.LiveDataTest
import dispatch.test.CoroutineTest
import io.kotest.matchers.shouldBe
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.Job
import kotlinx.coroutines.channels.Channel
import kotlinx.coroutines.flow.collect
import kotlinx.coroutines.flow.flow
import kotlinx.coroutines.runBlocking
fun main() { 
   //sampleStart 
   runBlocking {

    val channel = Channel&lt;String&gt;()
    val history = mutableListOf&lt;String&gt;()

    class SomeViewModel {
      val someFlow = flow {
        repeat(100) {
          emit(it)
        }
      }
    }

    class SomeFragment : Fragment() {

      val viewModel = SomeViewModel()

      init {
        dispatchLifecycleScope.launchOnResume {
          viewModel.someFlow.collect {
            channel.send("$it")
          }
        }
      }
    }

    val fragment = SomeFragment()

    history.add("resuming")
    fragment.resume()

    repeat(3) {
      history.add(channel.receive())
    }

    // pausing the lifecycle cancels the existing Job
    history.add("pausing")
    fragment.pause()

    // resuming the lifecycle creates a new Job
    history.add("resuming")
    fragment.resume()

    repeat(3) {
      history.add(channel.receive())
    }

    history.add("pausing")
    fragment.pause()

    history shouldBe listOf(
      "resuming",
      "0",
      "1",
      "2",
      "pausing",
      "resuming",
      "0",
      "1",
      "2",
      "pausing"
    )
  } 
   //sampleEnd
}</pre></code></div></div></div><h2 class="">Parameters</h2><div data-togglable="Parameters"><div class="platform-hinted WithExtraAttributes" data-platform-hinted="data-platform-hinted" data-togglable="Parameters"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div data-togglable="Parameters"><div class="table" data-togglable="Parameters"><div class="table-row" data-filterable-current=":dispatch-android-lifecycle:dokkaHtmlPartial/release" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><span><span>context</span></span></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph"><i>optional</i> - additional to <a href="../-view-lifecycle-coroutine-scope/index.html#-1654120400%2FProperties%2F296330618">CoroutineScope.coroutineContext</a> context of the coroutine.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":dispatch-android-lifecycle:dokkaHtmlPartial/release" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><span>minimum</span><wbr><span>State</span><wbr><span><span>Policy</span></span></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph"><i>optional</i> - the way this <span data-unresolved-link="kotlinx.coroutines/Job///PointingToDeclaration/">Job</span> will behave when passing below the minimum state or re-entering.  Uses <a href="-minimum-state-policy/-r-e-s-t-a-r-t_-e-v-e-r-y/index.html">MinimumStatePolicy.RESTART_EVERY</a> by default.</p></div></div></div></div></div></div></div></div></div></div></div>
          <h2 class="">Sources</h2>
          <div class="table" data-togglable="Sources"><a data-name="129438836%2FSource%2F1121864922" anchor-label="https://github.com/RBusarow/Dispatch/blob/main/dispatch-android-lifecycle/src/main/java/dispatch/android/lifecycle/DispatchLifecycleScope.kt#L122" id="129438836%2FSource%2F1121864922" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/main"></a>
            <div class="table-row" data-filterable-current=":dispatch-android-lifecycle:dokkaHtmlPartial/main" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/main">
              <div class="main-subrow keyValue ">
                <div class=""><span class="inline-flex"><a href="https://github.com/RBusarow/Dispatch/blob/main/dispatch-android-lifecycle/src/main/java/dispatch/android/lifecycle/DispatchLifecycleScope.kt#L122">androidJvm source</a><span class="anchor-wrapper"><span class="anchor-icon" pointing-to="129438836%2FSource%2F1121864922"></span>
                      <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                    </span></span></div>
                <div></div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer"><span class="go-to-top-icon"><a href="#content"></a></span><span>© 2022 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span></div>
      </div>
    </div>
  
</body></html>


